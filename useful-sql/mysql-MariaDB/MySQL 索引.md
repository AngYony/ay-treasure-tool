# MySQL 索引



什么情况索引会失效:
**1.负向条件查询不能使用索引**

负向条件有：!=、<>、not in、not exists、not like 等。
**2.索引列不允许为null**


单列索引不存null值，复合索引不存全为null的值，如果列允许为 null，可能会得到不符合预期的结果集。
**3.避免使用or来连接条件**

应该尽量避免在 where 子句中使用 or 来连接条件，因为这会导致索引失效而进行全表扫描，虽然新版的MySQL能够命中索引，但查询优化耗费的 CPU比in多。
**4.模糊查询**

前导模糊查询不能使用索引，非前导查询可以。
以上情况索引都会失效，所以进行for update的时候，会进行table lock
参考：https://juejin.im/post/5b14e0fd6fb9a01e8c5fc663