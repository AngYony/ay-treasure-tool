# Linux命令的输入输出重定向

Linux命令的重定向分为：输入重定向和输出重定向。



## 输入重定向

输入重定向是指把文件导入到命令中。

- 标准输入重定向（STDIN，文件描述符为`0`）：默认从键盘输入，也可从其他文件或命令中输入。



对于输入重定向来讲，用到的符号及其作用如下所示：

| 符号                 | 作用                                         |
| :------------------- | :------------------------------------------- |
| 命令 < 文件          | 将文件作为命令的标准输入                     |
| 命令 << 分界符       | 从标准输入中读入，直到遇见分界符才停止       |
| 命令 < 文件1 > 文件2 | 将文件1作为命令的标准输入并将标准输出到文件2 |

输入重定向的作用是把文件直接导入到命令中，实际使用的较少。

示例一，使用符号`命令 << 分界符`，直到用户输入end时，才执行ls命令。

```shell
[angyony_vm@angyony s3_sample]$ ls << end
> a
> b
> end
error.txt  readme.txt
```

示例二，使用输入重定向把error.txt文件导入给`wc -l`命令，统计一下文件中的内容行数：

```
[angyony_vm@angyony s3_sample]$ wc -l < error.txt 
2
```

备注：上述语句等同于管道符命令：

```shell
cat error.txt | wc -l
```



## 输出重定向

输出重定向则是指把原本要输出到屏幕的数据信息写入到指定文件中。

输出重定向又分为了标准输出重定向和错误输出重定向两种不同的模式，以及清空写入与追加写入两种方式。

- 标准输出重定向（STDOUT，文件描述符为`1`）：默认输出到屏幕。
- 错误输出重定向（STDERR，文件描述符为`2`）：默认输出到屏幕。

标准输出模式示例：

```shell
[root@angyony ~]# ls -l abc.txt 
-rw-r--r--. 1 root root 232987 8月   9 23:33 abc.txt
```

错误输出模式示例：

```shell
[root@angyony ~]# ls -l xxxxxx
ls: 无法访问xxxxxx: 没有那个文件或目录
```

对于输出重定向来讲，用到的符号及其作用如下所示：

| 符号                                   | 作用                                                         |
| -------------------------------------- | ------------------------------------------------------------ |
| `命令 > 文件名`                        | 将标准输出重定向到一个文件中（清空原有文件的数据）           |
| `命令 2> 文件名`                       | 将错误输出重定向到一个文件中（清空原有文件的数据）           |
| `命令 >> 文件名`                       | 将标准输出重定向到一个文件中（追加到原有内容的后面）         |
| `命令 2>> 文件名`                      | 将错误输出重定向到一个文件中（追加到原有内容的后面）         |
| `命令 >> 文件 2>&1` 或 `命令 &>> 文件` | 将标准输出与错误输出共同写入到文件中（追加到原有内容的后面） |

注意：对于重定向中的标准输出模式，可以省略文件描述符1不写，**而错误输出模式的文件描述符2是必须要写的。**

补充：`&>` 等同于`2>&1`



### 命令 > 文件名

符号：命令 > 文件名，用于将命令的标准输出覆盖写入到指定文件中（清空原有内容）。示例如下：

```shell
[angyony_vm@angyony s3_sample]$ man bash > readme.txt
```

上述语句将man bash命令原本要输出到屏幕的信息写入到readme.txt文件中，该示例是标准输出重定向。

使用`命令 > 文件名`时，是以覆盖写入的方式记录内容的，例如：

```shell
[angyony_vm@angyony s3_sample]$ echo "nihao" > readme.txt
[angyony_vm@angyony s3_sample]$ cat readme.txt 
nihao
```

### 命令 >>文件名

符号：命令 >>文件名，用于将命令的标准输出追加写入到指定文件中。示例如下：

```shell
[angyony_vm@angyony s3_sample]$ echo ".net core" >> readme.txt
[angyony_vm@angyony s3_sample]$ cat readme.txt 
nihao
.net core
```

### 命令 2> 文件名

符号：命令 2> 文件名，用于将命令的错误输出（仅发生错误时输出的错误信息）覆盖写入到指定的文件中。示例如下：

```shell
[angyony_vm@angyony s3_sample]$ ls -l xxxxxx 2> error.txt
[angyony_vm@angyony s3_sample]$ cat error.txt
ls: 无法访问xxxxxx: 没有那个文件或目录
```

### 命令 2>> 文件名

符号：命令 2>> 文件名，用于将命令的错误输出追加到指定的文件中。示例如下：

```shell
[angyony_vm@angyony s3_sample]$ ls -l xxx 2>> error.txt
[angyony_vm@angyony s3_sample]$ cat error.txt 
ls: 无法访问xxxxxx: 没有那个文件或目录
ls: 无法访问xxx: 没有那个文件或目录
```



### /dev/null

在使用输出重定向时，如果不想将输出的内容显示到屏幕窗口上，可以将输出重定向到/dev/null文件。

/dev/null是一个被称作Linux黑洞的文件，把输出信息重定向到这个文件等同于删除数据（类似于没有回收功能的垃圾箱），可以让用户的屏幕窗口保持简洁。

