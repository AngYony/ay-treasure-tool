# 微服务组成部分

- 服务注册与发现（consul）
- 负载均衡
  - grpc负载均衡
- 配置中心（nacos）
- 分布式文件系统（oos）
  - 内网穿透（natapp、续断、花生壳）
- 分布式锁
- 分布式事务
- - [x] 分布式缓存（redis）
- - [x] 分布式会话（redis+cookie+SSO+CAS）
- 幂等性：




服务雪崩：服务雪崩效应是一种因“服务提供者的不可用”（原因）导致“服务调用者不可用”（结果），并将不可用逐渐放大的现象。



服务雪崩原因：

- 服务不可用
  - 硬件故障
  - 程序Bug
  - 缓存击穿
  - 用户大量请求
- 重试加大流量
  - 用户重试
  - 代码逻辑重试
- 服务调用者不可用
  - 同步等待造成的资源耗尽



服务雪崩应对策略：

- 应用扩容
  - 增加机器数量
  - 升级硬件规格
- 流控
  - 限流，超过了能够处理的流量范围，此时采取措施，进行流量限制。如1：拒绝；2：排队等待；
  - 关闭重试
- 缓存
  - 缓存预加载
  - 多级缓存，引入其他缓存组件。
- 服务降级
  - 服务接口拒绝服务
  - 页面拒绝服务
  - 延迟持久化
  - 随机拒绝服务
- 服务熔断：调用方发现服务请求很慢或发生了错误，此时就不把新的请求发送给该服务器，等过段时间后，再重试发给该服务器。这种机制就是熔断。
- 削峰
- 超时/重试 机制











其他微服务技术手段：

- 服务容错
- 缓存双写一致性





 







